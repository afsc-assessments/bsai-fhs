#* process length comps ----
#** domestic lengths ----
lend <- readRDS(here::here(year,'data','raw','lengths_fishery_domestic.RDS')) %>%
group_by(ID) %>%
mutate(total=sum(FREQUENCY))
## Calculate proportions
lend <- BIN_LEN_DATA(lend, len_bins=len_bins) %>%
mutate(LENGTH=BIN, PROP=FREQUENCY/total,
LNUMBERS=PROP*EXTRAPOLATED_NUMBER) %>%
filter(!is.na(LNUMBERS)) %>%  select(-BIN, -total)
## Sum over duplicates
lend <- group_by(lend, YEAR, LENGTH, SEX, GEAR) %>%
summarize(LNUMBERS=sum(LNUMBERS), .groups='drop') %>%
arrange(GEAR, YEAR, SEX, LENGTH)
## Add missing combinations
grid <- expand.grid(LENGTH=len_bins,
YEAR=unique(lend$YEAR),
SEX=unique(lend$SEX),
GEAR=unique(lend$GEAR))
DLCOMP <- merge(lend, grid, all=TRUE)
DLCOMP$LNUMBERS[is.na(DLCOMP$LNUMBERS)] <- 0
lenf <- readRDS(here::here(year,'data','raw','lengths_fishery_foreign.RDS')) %>%
rename(LENGTH=SIZE_GROUP,
EXTRAPOLATED_NUMBER=SPECIES_HAUL_NUMBER,
EXTRAPOLATED_WEIGHT=SPECIES_HAUL_WEIGHT) %>%
group_by(HAUL_JOIN) %>% mutate(total=sum(FREQUENCY))
## Calculate proportions
lenf <- BIN_LEN_DATA(lenf, len_bins=len_bins) %>%
mutate(LENGTH=BIN, PROP=FREQUENCY/total,
LNUMBERS=PROP*EXTRAPOLATED_NUMBER) %>%
filter(!is.na(LNUMBERS)) %>%  select(-BIN, -total)
## Sum over duplicates
lenf <- group_by(lenf, YEAR, LENGTH, SEX, GEAR) %>%
summarize(LNUMBERS=sum(LNUMBERS), .groups='drop') %>%
arrange(GEAR, YEAR, SEX, LENGTH)
## Add missing combinations
grid <- expand.grid(LENGTH=len_bins,
YEAR=unique(lenf$YEAR),
SEX=unique(lenf$SEX),
GEAR=unique(lenf$GEAR))
FLCOMP <- merge(lenf, grid, all=TRUE)
FLCOMP$LNUMBERS[is.na(FLCOMP$LNUMBERS)] <- 0
## Sum over duplicated combinations while pivoting SEX wider
lcomps <- rbind(FLCOMP, DLCOMP) %>%
## This replaces the old aggregate and cast at the same time
pivot_wider(names_from=SEX, values_from=LNUMBERS, values_fn=sum) %>%
## Drop unsexed column. Code not setup to use it anymore
select(-U)
## Calculate proportions
lcomps <- lcomps %>% group_by(YEAR, GEAR) %>%
## Divide by totals to get proportions for each year:gear combo
mutate(total=sum(F+M), Fprop=F/total, Mprop=M/total) %>%
as.data.frame() %>% arrange(YEAR,GEAR, LENGTH) %>%
filter(total>0) # some totals=0 cause NaNs
## Create male and female wide data.frames
lcomps_f <- lcomps %>%
pivot_wider(id_cols=c('YEAR', 'GEAR'), values_fn=sum,
names_from=LENGTH, values_from='Fprop')
lcomps_m <- lcomps %>%
pivot_wider(id_cols=c('YEAR', 'GEAR'), values_fn=sum,
names_from=LENGTH, values_from='Mprop')
lcomps <- cbind(lcomps_f, lcomps_m[,-c(1,2)])
## Add Nsamp which comes from the hauls data created above
lcomps <- merge(y=lcomps, x=all_hauls[,c('year', 'nhauls_tot')],
by.y='YEAR', by.x='year', all=TRUE)
## Checks
if(!all.equal(rowSums(lcomps[,-(1:3)]), rep(1, times=nrow(lcomps))))
stop("Rows did not sum to zero in lcomps, something went wront")
if(!all(!is.na(lcomps$nhauls_tot)))
stop("Something wrong with using hauls for Nsamp")
### Build SS structure
## Code only setup to use non-pelagic gear so filter
lcomps <- lcomps[lcomps$GEAR==1,]
SS_lcomps_fishery <-
data.frame(year=lcomps$year, month=7, fleet=1,
sex=3, part=0, Nsamp=lcomps$nhauls_tot,
lcomps[,-(1:3)])
names(SS_lcomps_fishery) <- names(SS_dat$lencomp)
mod_2020_dat <- r4ss::SS_readdat(here::here(year, 'mgmt','18.2c_2020'))
mod_2020_dat <- r4ss::SS_readdat(here::here(year, 'mgmt','18.2c_2020','2020_bsai_fhs.dat'))
names(mod_2020_dat$lencomp)
mod_2020_dat <- r4ss::SS_readdat(here::here(year, 'mgmt','18.2c_2020','2020_bsai_fhs.dat'))
names(SS_lcomps_fishery) <- names(mod_2020_dat$lencomp)
write.csv(SS_lcomps_fishery,
file = here::here(year,'data','output',"SS_lcomp_fishery-oldmethod.csv"), row.names=FALSE)
write.csv(SS_lcomps_fishery,
file = here::here(year,'data','output',"fsh_len_ss3-oldmethod.csv"), row.names=FALSE)
mod_2020_dat$lencomp
str(mod_2020_dat$lencomp)
SS_lcomps_fishery %>% mutate(src = 'newpull') %>%
bind_rows(., mod_2020_dat$lencomp%>% mutate(src = 'oldpull'))
comparedf <- SS_lcomps_fishery %>% mutate(src = 'newpull') %>%
bind_rows(., mod_2020_dat$lencomp%>% mutate(src = 'oldpull'))
names(comparedf)
ggplot(comparedf, aes(x =Yr, y = Nsamp, fill = src )) +
geom_bar(stat = 'identity')
library(ggplot2)
ggplot(comparedf, aes(x =Yr, y = Nsamp, fill = src )) +
geom_bar(stat = 'identity')
ggplot(comparedf, aes(x =Yr, y = Nsamp, fill = src )) +
geom_bar(stat = 'identity',position = 'stack')
ggplot(comparedf, aes(x =Yr, y = Nsamp, fill = src )) +
geom_bar(stat = 'identity',position = 'dodge')
ggplot(comparedf, aes(x =Yr, y = Nsamp, fill = src )) +
geom_bar(stat = 'identity',position = 'dodge') +
scale_fill_manual(values = c('grey22','grey77'))
ggplot(comparedf, aes(x =Yr, y = Nsamp, fill = src )) +
geom_bar(stat = 'identity',position = 'dodge') +
scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
unique(comparedf$FltSvy)
comparedf <- SS_lcomps_fishery %>% mutate(src = 'newpull') %>%
bind_rows(., mod_2020_dat$lencomp%>% mutate(src = 'oldpull')) %>%
filter(FltSvy!=2)
## small changes to the inputN between years
ggplot(comparedf, aes(x =Yr, y = Nsamp, fill = src )) +
geom_bar(stat = 'identity',position = 'dodge') +
scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
## small changes to the inputN between years
ggplot(comparedf, aes(x =Yr, y = Nsamp, fill = src )) +
geom_bar(stat = 'identity',position = 'dodge') +
geom_bar(data = subset(comparedf, FltSvy == -1), fill = 'red') +
scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
## small changes to the inputN between years
ggplot(comparedf, aes(x =Yr, y = Nsamp, fill = src )) +
geom_bar(stat = 'identity',position = 'dodge') +
geom_bar(data = subset(comparedf, FltSvy == -1), fill = 'red',stat = 'identity',position = 'dodge') +
scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr')
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(sex = substr(variable,1,1))
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(sex = substr(variable,1,1),
length = substr(variable,2,nchar(variable)))
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(sex = substr(variable,1,1),
length = across(c('variable'), substr, 2, nchar(variable)))
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(sex = substr(variable,1,1),
across(c('len'), substr, 2, nchar(variable)))
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable)))
summary(comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') )
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(variable =as.character(variable)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable)))
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(variable =as.character(variable)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(len = across(c('variable'), substr, 2, nchar(variable)))
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(variable =as.character(variable)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>% head()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(variable =as.character(variable)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
ggplot(., aes(x =variable, y = value, fill = sex )) +
geom_point() +
facet_wrap(~Yr)
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
ggplot(., aes(x =variable, y = value, fill = sex )) +
geom_point() +
facet_wrap(~Yr)
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
ggplot(., aes(x =variable, y = value, fill = sex )) +
geom_point() +
facet_wrap(~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
# scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = 'Yr') %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
ggplot(., aes(x =variable, y = value, fill = src )) +
geom_point() +
facet_wrap(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
# scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = c('Yr','src')) %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
ggplot(., aes(x =variable, y = value, fill = src )) +
geom_point() +
facet_wrap(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
# scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = c('Yr','src')) %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
ggplot(., aes(x =variable, y = value, color = src )) +
geom_point() +
facet_wrap(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
# scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
ggplot(., aes(x =variable, y = value, color = src )) +
geom_point() +
facet_grid(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
# scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
ggplot(., aes(x =variable, y = value, color = src )) +
geom_point() +
facet_grid(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
# scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = c('Yr','src')) %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
filter(Yr > 2000) %>%
ggplot(., aes(x =variable, y = value, color = src )) +
geom_point() +
facet_grid(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
# scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = c('Yr','src')) %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
filter(Yr > 2000) %>%
ggplot(., aes(x =variable, y = value, color = src )) +
geom_line() +
facet_grid(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
# scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = c('Yr','src')) %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
filter(Yr > 2000) %>%
ggplot(., aes(x =variable, y = value, color = src, group = src )) +
geom_line() +
facet_grid(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
# scale_fill_manual(values = c('grey22','grey77')) +
theme_minimal()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = c('Yr','src')) %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
filter(Yr > 2000) %>%
ggplot(., aes(x =variable, y = value, color = src, group = src )) +
geom_line() +
facet_grid(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
scale_color_manual(values = c('grey22','grey77')) +
theme_minimal()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = c('Yr','src')) %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
filter(Yr > 2000) %>%
ggplot(., aes(x =variable, y = value, color = src, group = src )) +
geom_line() +
facet_grid(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
scale_color_manual(values = c('grey22','grey77')) +
theme_void()
?facet_grid
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = c('Yr','src')) %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
filter(Yr > 2000) %>%
ggplot(., aes(x =variable, y = value, color = src, group = src )) +
geom_line() +
facet_grid(sex~Yr, cols = 5)+
# geom_bar(stat = 'identity',position = 'dodge') +
scale_color_manual(values = c('grey22','grey77')) +
theme_void()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = c('Yr','src')) %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
filter(Yr > 2010) %>%
ggplot(., aes(x =variable, y = value, color = src, group = src )) +
geom_line() +
facet_grid(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
scale_color_manual(values = c('grey22','grey77')) +
theme_void()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = c('Yr','src')) %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
filter(Yr >= 2000 & Yr < 2010) %>%
ggplot(., aes(x =variable, y = value, color = src, group = src )) +
geom_line() +
facet_grid(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
scale_color_manual(values = c('grey22','grey77')) +
theme_void()
comparedf %>%
select(-Seas,-FltSvy,-Gender,-Part,-Nsamp) %>%
reshape2::melt(id = c('Yr','src')) %>%
mutate(variable =as.character(variable), value = as.numeric(value)) %>%
mutate(sex = substr(variable,1,1)) %>%
mutate(across(c('variable'), substr, 2, nchar(variable))) %>%
filter(Yr <= 2000) %>%
ggplot(., aes(x =variable, y = value, color = src, group = src )) +
geom_line() +
facet_grid(sex~Yr)+
# geom_bar(stat = 'identity',position = 'dodge') +
scale_color_manual(values = c('grey22','grey77')) +
theme_void()
mod_2020_dat$lencomp$Yr[which(mod_2020_dat$lencomp$FltSvy==-1) ]
## turn off lengths in years with marginal ages
offyrs <- mod_2020_dat$lencomp$Yr[which(mod_2020_dat$lencomp$FltSvy==-1)]
SS_lcomps_fishery$FltSvy[SS_lcomps_fishery$Yr %in% offyrs] <- -1
write.csv(SS_lcomps_fishery,
file = here::here(year,'data','output',"fsh_len_ss3-oldmethod.csv"), row.names=FALSE)
llabs <- c('18.2c (2020)',
'+ catches',
'+ srv biomass',
'+ srv CAAL',
'+ srv length',
'+ fsh age',
'+ fsh len'
)
llabs2 = c('18.2c (2020)',
'Add All Data',
'+Bias Ramp & Francis Tuning (18.2c [2024])')
library(r4ss)
library(here)
library(dplyr)
library(ggplot2)
theme_set(afscassess::theme_report())
colvec <- c("dodgerblue4", "#ffb703","#219ebc", "#023047",  "#fb8500")
year <- 2024
old_mdl_fldr <- here::here(year,'mgmt','18.2c_2020')
mod18.2c_2020 <- mod_2020 <- SS_output(old_mdl_fldr, verbose = FALSE)
mod02_00
mod02_00 <- SS_output(here::here(year, 'model_runs','02_bridging','02.00_18.2c_2020_ss3v33022w-catches'))
2
library(r4ss)
library(here)
library(dplyr)
library(ggplot2)
theme_set(afscassess::theme_report())
colvec <- c("dodgerblue4", "#ffb703","#219ebc", "#023047",  "#fb8500")
year <- 2024
old_mdl_fldr <- here::here(year,'mgmt','18.2c_2020')
mod18.2c_2020 <- mod_2020 <- SS_output(old_mdl_fldr, verbose = FALSE)
llabs <- c('18.2c (2020)',
'+ catches',
'+ srv biomass',
'+ srv CAAL',
'+ srv length',
'+ fsh age',
'+ fsh len'
)
llabs2 = c('18.2c (2020)',
'Add All Data',
'+Bias Ramp & Francis Tuning (18.2c [2024])')
mod02_00 <- SS_output(here::here(year, 'model_runs','02_bridging','02.00_18.2c_2020_ss3v33022w-catches'))
mod02_01 <- SS_output(here::here(year, 'model_runs','02_bridging','02.01_18.2c_2020_ss3v33022w-catches-srvbio'))
mod02_02 <- SS_output(here::here(year, 'model_runs','02_bridging','02.02_18.2c_2020_ss3v33022w-catches-srvbio-srvcaal'))
mod02_03 <- SS_output(here::here(year, 'model_runs','02_bridging','02.03_18.2c_2020_ss3v33022w-catches-srvbio-srvcaal-srvlen'))
mod02_04 <- SS_output(here::here(year, 'model_runs','02_bridging','02.04_18.2c_2020_ss3v33022wcatches-srvbio-srvcaal-srvlen-fshage'))
# mod02_05 <- SS_output(here::here(year, 'model_runs','02_bridging','02.05_18.2c_2020_ss3v33022w-catches-srvbio-srvcaal-srvlen-fshage-fshlen'))
mod02_06 <- SS_output(here::here(year, 'model_runs','02_bridging','02.06_18.2c_2020_ss3v33022w-catches-srvbio-srvcaal-srvlen-fshage-fshlen-srvage'))
# mod02_05 <- SS_output(here::here(year, 'model_runs','02_bridging','02.05_18.2c_2020_ss3v33022w-catches-srvbio-srvcaal-srvlen-fshage-fshlen'))
mod02_06 <- SS_output(here::here(year, 'model_runs','02_bridging','02.06_18.2c_2020_ss3v33022w-catches-srvbio-srvcaal-srvlen-fshage-fshlen-srvage'))
mod02_08x <- SS_output(here::here(year, 'model_runs','02_bridging','02.08_18.2c_2020_ss3v33022w-newdata-biasramp-francis'))
r4ss::tune_comps(replist = mod02_08x, option = 'Francis',
digits = 6, niters_tuning = 3, exe = 'ss',
write = TRUE, dir = here::here(year, 'model_runs','02_bridging','02.08_18.2c_2020_ss3v33022w-newdata-biasramp-francis'))
rm(mod02_08x)
mod02_08 <- SS_output(here::here(year, 'model_runs','02_bridging','02.08_18.2c_2020_ss3v33022w-newdata-biasramp-francis'))
compsummary_7 <- SSsummarize(list(mod_2020, mod02_00,
mod02_01, mod02_02,
mod02_03, mod02_04,
mod02_06)) ## last one has fish length and ghosted survey ages
compsummary_8 <- SSsummarize(list(mod_2020,
mod02_06,
mod02_08))
SSplotComparisons(compsummary_7, legendlabels = llabs, indexPlotEach = TRUE)
SSplotComparisons(compsummary_8,
legendlabels = llabs2,
indexPlotEach = TRUE,
print = F)
SSplotComparisons(compsummary_8,
legendlabels = llabs2,
indexPlotEach = TRUE,
print = TRUE,
plotdir = here::here(year, 'model_runs','02_bridging','02.08_18.2c_2020_ss3v33022w-newdata-biasramp-francis'))
SS_plots(mod02_08)
mod_2020_new_fsh_len_comps <- SS_output(here::here(year, 'model_runs','01_data_checks','18.2c_2020_ss3v33022w-new_fsh_len_comps'))
compsummary_2 <- SSsummarize(list(mod_2020,mod_2020_new_fsh_len_comps))
p <- SSplotComparisons(compsummary_2,
legendlabels = c('Model 18.2c (2020)','Model 18.2c (2020) with new fsh length comp data'),
subplots = 2,
plot = TRUE)
SS_plots(SS_output("C:/users/maia.kapur/work/assessments/sablefish/2023-mod-lockfshselex"))
SS_plots(SS_output("C:/users/maia.kapur/work/assessments/sablefish/2023-mod"))
rnorm(100,0,0.1)
plot(rgamma(100,2,1))
hist(rgamma(100,2,1))
hist(rgamma(100,1,1))
data.frame('total' = rnorm(100,0,0.1),
'fishery lengths' = rgamma(100,1,1),
'survey aages' = rnorm(100,0.25,1),
'index' = rnorm(100,-1,3))
melt(data.frame('total' = rnorm(100,0,0.1),
'fishery lengths' = rgamma(100,1,1),
'survey aages' = rnorm(100,0.25,1),
'index' = rnorm(100,-1,3)))
reshape2::melt(data.frame('total' = rnorm(100,0,0.1),
'fishery lengths' = rgamma(100,1,1),
'survey aages' = rnorm(100,0.25,1),
'index' = rnorm(100,-1,3)))
data.frame('R0' = seq(5,15, length.out = 100),
'total' = rnorm(100,0,0.1),
'fishery lengths' = rgamma(100,1,1),
'survey ages' = rnorm(100,0.25,1),
'index' = rnorm(100,-1,3))
reshape2::melt(data.frame('R0' = seq(-5,5, length.out = 100),
'total' = rnorm(100,0,0.1),
'fishery lengths' = rgamma(100,1,1),
'survey ages' = rnorm(100,0.25,1),
'index' = rnorm(100,-1,3)))
df<- reshape2::melt(data.frame('R0' = seq(-5,5, length.out = 100),
'total' = rnorm(100,0,0.1),
'fishery lengths' = rgamma(100,1,1),
'survey ages' = rnorm(100,0.25,1),
'index' = rnorm(100,-1,3)), id = 'R0')
ggplot(df, aes(x = R0, y = value, color = variable)) +
geom_line()
ggplot(df, aes(x = R0, y = value, color = variable)) +
geom_hist()
ggplot(df, aes(x = R0, y = value, color = variable)) +
geom_histogram()
ggplot(df, aes(x = R0, y = value, color = variable)) +
geom_histogram(stat = 'identity')
ggplot(df, aes(x  = value, color = variable)) +
geom_histogram()
ggplot(df, aes(x  = -value, color = variable)) +
geom_histogram()
ggplot(df, aes(x  = -value, color = variable)) +
geom_density()
-rnorm(100,0,0.1)
View(afscdata::bsai_fhs)
