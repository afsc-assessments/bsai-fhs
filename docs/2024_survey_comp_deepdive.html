<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Maia Kapur maia.kapur@noaa.gov">

<title>Survey Comps Deep Dive</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="2024_survey_comp_deepdive_files/libs/clipboard/clipboard.min.js"></script>
<script src="2024_survey_comp_deepdive_files/libs/quarto-html/quarto.js"></script>
<script src="2024_survey_comp_deepdive_files/libs/quarto-html/popper.min.js"></script>
<script src="2024_survey_comp_deepdive_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="2024_survey_comp_deepdive_files/libs/quarto-html/anchor.min.js"></script>
<link href="2024_survey_comp_deepdive_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="2024_survey_comp_deepdive_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="2024_survey_comp_deepdive_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="2024_survey_comp_deepdive_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="2024_survey_comp_deepdive_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#close-up-data-comparisons" id="toc-close-up-data-comparisons" class="nav-link" data-scroll-target="#close-up-data-comparisons">Close-up Data Comparisons</a>
  <ul class="collapse">
  <li><a href="#marginal-lengths" id="toc-marginal-lengths" class="nav-link" data-scroll-target="#marginal-lengths">Marginal Lengths</a></li>
  <li><a href="#marginal-ages" id="toc-marginal-ages" class="nav-link" data-scroll-target="#marginal-ages">Marginal Ages</a></li>
  <li><a href="#caals" id="toc-caals" class="nav-link" data-scroll-target="#caals">CAALs</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Survey Comps Deep Dive</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Maia Kapur maia.kapur@noaa.gov </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="background" class="level1">
<h1>Background</h1>
<p>I’ve had a lot of trouble reproducing the survey compositional data used in Model 18.c (2020), which was generated using a combination of data extractions from the deprecated <code>haehnr</code> schema and some bespoke filtration/workup code. For the assessment we use conditional ages-at-length (by sex), marginal lengths (by sex), and marginal ages (by sex, which are ghosted).</p>
<p>The disappearance of the <code>haehnr</code> schema means that I am forced to start with either the <code>bts_specimen_data.csv</code> drawn from <code>afscdata()</code> or the size composition dataframe from <code>gapindex</code>. I am unable to pass either dataset to the legacy (2020) code, since it’s looking for individual columns for <code>MALES</code> and <code>FEMALES</code> (which have been superceded by a <code>SEX</code> column in both cases). Following an intuitive grouping/expansion pipeline (e.g., re-writing my own code to calculate the marginal comp data) resulted in drastically different datasets and modeling outcomes. I was able to calculate CAAL data near enough to the old dataset by starting with the raw <code>specimen</code> data (not <code>gapindex</code>) and passing it through Carey’s code. This is less-than desireable, because I’d prefer to have a single starting source (one package or the other) and updated munging routines for all survey compositional data.</p>
<p>So, the purpose of this document is to dig into where the discrepancy between data sources and workup is arising, and to see whether we can find a best way forward for reproducibly generating these data.</p>
<p><strong>Top Line Takeaways</strong> I was able to reproduce what we needed using the values in <code>gapindex</code>, but as of this writing (Jan 2024) had to work with the package-specific functions to ensure that the compositional values use a global ALK conditioned on age data from <em>just</em> the EBS Standard area. This matches what was done before.</p>
<p>I am <em>not</em> going to use/start with the survey data arising from <code>afscdata</code> at present.</p>
</section>
<section id="close-up-data-comparisons" class="level1">
<h1>Close-up Data Comparisons</h1>
<section id="marginal-lengths" class="level2">
<h2 class="anchored" data-anchor-id="marginal-lengths">Marginal Lengths</h2>
<p>As stated above, the 2020 model pulled from the <code>haehnr</code> schema, which I can no longer do, while I do have the raw file (<code>'2020/data/lengths_survey_ebs.csv'</code>). Let’s compare that with <code>2024/raw/bsai_ts_length_data.csv</code>, from <code>afscdata</code>, and the contents of <code>production_sizecomp_stratum</code> following the <code>gapindex</code> vignette hosted <a href="https://github.com/afsc-gap-products/gapindex/blob/main/vignettes/ex_agecomps_ebs_standard.Rmd">here</a>.</p>
<p>Comparing the <code>names</code> of these objects, there are a few key differences: - the <code>haehnr</code> table has a column for males and females separately; GAP told us this should be replaced by filtering <code>POPULATIONCOUNT</code> on the <code>SEX</code> column of their table. There doesn’t seem to be an equivalent column for the <code>afscdata</code> table.</p>
<ul>
<li>The counts suggest that <code>haehnr</code> table has pre-filled zeros (hence roughly double the number of records as <code>gapindex</code>, and an identical number of records between sexes). For example, for length bin 80 the <code>haehnr</code> schema has automatically populated itself with an empty row for males of length 80.</li>
<li>What comes out of <code>afscata</code> is subjectively less similar to <code>haehnr</code> than <code>gapindex</code>. (Always important to recall that in these datasets, males are coded as sex = 1). The scale is different between approaches.</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
# Groups:   source [3]
  source                    sex     `n()`
  &lt;chr&gt;                     &lt;chr&gt;   &lt;int&gt;
1 afscdata$frequency        females   285
2 afscdata$frequency        males     252
3 gapindex$population_count females   282
4 gapindex$population_count males     240
5 haehnr$MALES/$FEMALES     females   293
6 haehnr$MALES/$FEMALES     males     293</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2024_survey_comp_deepdive_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Strong distinctions between all three data pull methods; afscdata seems to have far more small individuals.</figcaption>
</figure>
</div>
</div>
</div>
<p>Now I will calculate the frequencies of each length bin and compare outcomes, across data sources as well as compared to the inputs in the 2020 model. Recall that these are still the raw data; they haven’t been binned. This gives me reason to a) abandon the <code>afscdata</code> pull from the outset, and b) dig into what’s happening to cause the subsequent workup on these data to diverge so much from before.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 82 × 55
    YEAR SEX       `350`     `400`  `320`   `150`   `140`  `240`  `190`   `130`
   &lt;int&gt; &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1982 females 0.0249  0.00835   0.0556 0.0209  0.0236  0.0486 0.0296 0.0217 
 2  1982 males   0.00492 0.000222  0.0352 0.0253  0.0284  0.0481 0.0304 0.0239 
 3  1983 females 0.0427  0.00535   0.0577 0.0174  0.0182  0.0333 0.0386 0.0270 
 4  1983 males   0.0121  0.0000508 0.0486 0.0155  0.0238  0.0395 0.0445 0.0345 
 5  1984 males   0.0124  0.000128  0.0460 0.0368  0.0298  0.0425 0.0405 0.0171 
 6  1984 females 0.0335  0.00580   0.0398 0.0439  0.0235  0.0443 0.0319 0.0226 
 7  1985 males   0.0246  0.000560  0.0499 0.0144  0.0152  0.0407 0.0458 0.00776
 8  1985 females 0.0354  0.0113    0.0446 0.0169  0.0145  0.0408 0.0459 0.00876
 9  1986 females 0.0450  0.0195    0.0482 0.00892 0.00806 0.0519 0.0175 0.00687
10  1986 males   0.0266  0.000757  0.0681 0.00897 0.0130  0.0598 0.0316 0.0190 
# ℹ 72 more rows
# ℹ 45 more variables: `280` &lt;dbl&gt;, `160` &lt;dbl&gt;, `230` &lt;dbl&gt;, `120` &lt;dbl&gt;,
#   `270` &lt;dbl&gt;, `180` &lt;dbl&gt;, `290` &lt;dbl&gt;, `260` &lt;dbl&gt;, `300` &lt;dbl&gt;,
#   `100` &lt;dbl&gt;, `330` &lt;dbl&gt;, `380` &lt;dbl&gt;, `210` &lt;dbl&gt;, `220` &lt;dbl&gt;,
#   `340` &lt;dbl&gt;, `110` &lt;dbl&gt;, `200` &lt;dbl&gt;, `170` &lt;dbl&gt;, `250` &lt;dbl&gt;,
#   `310` &lt;dbl&gt;, `420` &lt;dbl&gt;, `360` &lt;dbl&gt;, `370` &lt;dbl&gt;, `440` &lt;dbl&gt;,
#   `390` &lt;dbl&gt;, `80` &lt;dbl&gt;, `450` &lt;dbl&gt;, `430` &lt;dbl&gt;, `410` &lt;dbl&gt;, …</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2024_survey_comp_deepdive_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">The gapindex and haehnr compositional curves are nearly indistinguishable, but they still don’t match the 2020 data (not shown).</figcaption>
</figure>
</div>
</div>
</div>
<p>Looking at an individual value, they match to the third decimal with the 2020 model.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 7
   year length sex        value source                           tot   freq
  &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;                          &lt;dbl&gt;  &lt;dbl&gt;
1  2006    280 females 69433469 haehnr$MALES/$FEMALES     1957115441 0.0355
2  2006    280 females      520 afscdata$frequency             12132 0.0429
3  2006    280 females 34500199 gapindex$population_count  974874633 0.0354</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>      Obs
1 0.01691</code></pre>
</div>
</div>
<p>This is good news; it means we can safely use the <code>gapindex</code> products. I went through and did some data wrangling, and after debugging some unwieldy <code>dplyr::group_by()</code> terms was able to reproduce the marginal length compositions from the 2020 assessment. Other mistakes involved wrong binning behavior for the plus and minus groups.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Comparison of marginal length comps, early years</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Comparison of marginal length comps, later years</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2024_survey_comp_deepdive_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">All of the lines are overlapping.</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2024_survey_comp_deepdive_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">All of the lines are overlapping.</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p><strong>I am confident I can use the</strong> <code>gapindex</code> <code>production_sizecomp_stratum</code> <strong>object to get to a faithful reproduction of the 2020 marginal length comps</strong>.</p>
<section id="render-length-comps-ss3-format" class="level3">
<h3 class="anchored" data-anchor-id="render-length-comps-ss3-format">Render length comps SS3 format</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>     Yr Seas FltSvy Gender Part Nsamp          6.x          8.x         10.x
1  1982    7      2      3    0   109 0.000000e+00 0.000000e+00 0.0010973553
2  1983    7      2      3    0   170 0.000000e+00 3.162120e-04 0.0085153748
3  1984    7      2      3    0   152 0.000000e+00 2.586440e-04 0.0036603709
4  1985    7      2      3    0   192 0.000000e+00 8.967261e-04 0.0008282545
5  1986    7      2      3    0   259 0.000000e+00 3.340710e-04 0.0023644714
6  1987    7      2      3    0   192 0.000000e+00 0.000000e+00 0.0021711927
7  1988    7      2      3    0   207 0.000000e+00 0.000000e+00 0.0011507412
8  1989    7      2      3    0   258 0.000000e+00 3.302707e-05 0.0070169548
9  1990    7      2      3    0   261 0.000000e+00 6.678837e-05 0.0008656501
10 1991    7      2      3    0   278 0.000000e+00 3.278461e-04 0.0019786427
11 1992    7      2      3    0   279 0.000000e+00 0.000000e+00 0.0014643478
12 1993    7      2      3    0   296 2.020493e-05 2.500673e-04 0.0022055651
13 1994    7      2      3    0   285 0.000000e+00 1.644173e-04 0.0009208796
14 1995    7      2      3    0   269 0.000000e+00 0.000000e+00 0.0005786225
15 1996    7      2      3    0   298 0.000000e+00 9.736696e-05 0.0014241712
16 1997    7      2      3    0   292 0.000000e+00 2.341888e-04 0.0007493965
17 1998    7      2      3    0   327 0.000000e+00 2.914634e-04 0.0064900597
18 1999    7      2      3    0   251 0.000000e+00 1.208451e-04 0.0018070739
19 2000    7      2      3    0   286 2.182611e-04 3.256777e-04 0.0014185998
20 2001    7      2      3    0   299 7.682500e-05 2.563063e-04 0.0019678868
21 2002    7      2      3    0   291 1.219850e-04 3.842402e-04 0.0012315853
22 2003    7      2      3    0   293 2.925225e-04 0.000000e+00 0.0011839365
23 2004    7      2      3    0   288 3.681839e-05 3.326240e-04 0.0013805849
24 2005    7      2      3    0   298 2.243114e-05 3.222624e-04 0.0029644820
25 2006    7      2      3    0   264 3.152382e-04 3.072918e-04 0.0007475886
26 2007    7      2      3    0   270 5.890483e-05 9.226137e-04 0.0021995794
27 2008    7      2      3    0   261 6.381681e-05 1.535392e-04 0.0018116533
28 2009    7      2      3    0   240 0.000000e+00 6.654452e-05 0.0009759558
29 2010    7      2      3    0   255 0.000000e+00 1.772826e-04 0.0014550532
30 2011    7      2      3    0   270 0.000000e+00 3.014683e-05 0.0017054813
31 2012    7      2      3    0   243 1.142964e-04 1.019925e-04 0.0013779644
32 2013    7      2      3    0   265 1.364672e-04 6.494924e-04 0.0010087716
33 2014    7      2      3    0   273 0.000000e+00 1.130031e-04 0.0014287408
34 2015    7      2      3    0   267 1.458856e-04 6.357577e-04 0.0023226269
35 2016    7      2      3    0   298 5.021043e-05 2.167344e-04 0.0020025020
36 2017    7      2      3    0   280 1.981281e-04 8.081720e-04 0.0037930500
37 2018    7      2      3    0   339 0.000000e+00 1.966119e-04 0.0024381817
38 2019    7      2      3    0   331 0.000000e+00 5.362853e-05 0.0005039116
39 2021    7      2      3    0   323 0.000000e+00 1.281603e-05 0.0006101667
40 2022    7      2      3    0   314 0.000000e+00 1.214396e-04 0.0003009857
41 2023    7      2      3    0   308 0.000000e+00 0.000000e+00 0.0004627046
          12.x        14.x        16.x        18.x       20.x       22.x
1  0.015027626 0.021686995 0.017676511 0.026212046 0.04189694 0.04323973
2  0.027043109 0.017573331 0.030466759 0.038993311 0.03752844 0.03114742
3  0.019390853 0.034008387 0.048751095 0.035948886 0.03247866 0.03950532
4  0.004992015 0.014873906 0.023454608 0.038155456 0.05814407 0.05038791
5  0.008342870 0.008334210 0.010544024 0.019420734 0.03076032 0.04332013
6  0.010342328 0.014861380 0.021643167 0.021659077 0.02765449 0.02683677
7  0.008436094 0.030833312 0.038955193 0.033311828 0.03969867 0.02660761
8  0.019726897 0.011953774 0.015887626 0.043823854 0.04208296 0.04451328
9  0.005831846 0.025997099 0.030551931 0.019888790 0.02658579 0.03544722
10 0.001982398 0.003064160 0.013628522 0.029193016 0.03971931 0.03680545
11 0.011122565 0.020146169 0.015868758 0.018106621 0.02761160 0.03693588
12 0.004262756 0.008145875 0.021917746 0.024831883 0.01816841 0.02867256
13 0.005372409 0.012467435 0.018675736 0.026629048 0.02203011 0.01767957
14 0.002558378 0.007711485 0.015021639 0.018998049 0.02696730 0.02508235
15 0.008928065 0.013137209 0.019188342 0.020285656 0.02688309 0.02716304
16 0.003090078 0.006709096 0.010310225 0.012971105 0.01582500 0.01744184
17 0.011986380 0.005345280 0.009943337 0.013755633 0.01876924 0.01916628
18 0.004836213 0.012188910 0.012821501 0.011938123 0.01657903 0.02322780
19 0.004147734 0.007400950 0.014031964 0.014019092 0.01697479 0.01615601
20 0.003101445 0.005268918 0.009214608 0.017444218 0.02763875 0.02863115
21 0.002783157 0.007041437 0.009296169 0.011192038 0.01650553 0.02366691
22 0.005918597 0.007101850 0.009042605 0.011640999 0.01584434 0.01880771
23 0.003016638 0.009511177 0.018107171 0.019443953 0.01926260 0.02088755
24 0.009915032 0.011653261 0.017177778 0.023031067 0.02486328 0.02486603
25 0.004485382 0.012486871 0.021335074 0.026090898 0.02854236 0.02226771
26 0.003762127 0.004230766 0.010267586 0.021263855 0.03767922 0.03564497
27 0.004517498 0.005319440 0.007978083 0.008314613 0.01323029 0.02510089
28 0.003075067 0.009709288 0.009100538 0.013386682 0.01289521 0.01709607
29 0.010596137 0.012218809 0.015674757 0.016624012 0.01538185 0.01684063
30 0.011050613 0.010864707 0.028174813 0.021483454 0.02247719 0.01561565
31 0.002902211 0.010527434 0.015328621 0.026465561 0.02228303 0.02175139
32 0.002857863 0.005743395 0.010723370 0.023648557 0.02399398 0.02744910
33 0.011901701 0.028526303 0.021917121 0.016268216 0.02093320 0.02169468
34 0.004944918 0.015448904 0.032851085 0.031435610 0.03153485 0.03298991
35 0.009155602 0.018676511 0.023986339 0.029436119 0.03638892 0.03612974
36 0.010326852 0.019695073 0.029184161 0.030770870 0.03734693 0.04038719
37 0.014259754 0.027271264 0.031649760 0.033301637 0.03360708 0.04052407
38 0.004094119 0.012476745 0.025727254 0.041051768 0.03606305 0.03022622
39 0.003591510 0.014740992 0.020163369 0.022516743 0.03084080 0.04315211
40 0.001564363 0.007364184 0.022113496 0.023294581 0.02762346 0.03266370
41 0.001238729 0.007174518 0.012618513 0.018469945 0.02408290 0.02701109
         24.x       26.x       28.x       30.x       32.x       34.x       36.x
1  0.04302544 0.04771084 0.05998600 0.06329932 0.04961860 0.02948643 0.01208611
2  0.03523863 0.03793625 0.04168624 0.05060917 0.05113832 0.04608087 0.02157452
3  0.03888640 0.03794737 0.04296979 0.04359857 0.04112167 0.04017675 0.02585266
4  0.03670854 0.03576806 0.03955734 0.04017388 0.04022648 0.03618120 0.02259570
5  0.05087679 0.04496206 0.04091158 0.04624044 0.04702737 0.04819817 0.03564964
6  0.03466548 0.04202726 0.04477183 0.04613993 0.04447754 0.04945815 0.03741433
7  0.02782951 0.03017829 0.03307179 0.03388687 0.04477722 0.04501859 0.04212053
8  0.03123552 0.02513454 0.02918981 0.03394540 0.03016733 0.03800859 0.04001122
9  0.03511817 0.03172623 0.02823842 0.02609781 0.03285458 0.03095755 0.03604308
10 0.03873301 0.03640623 0.03348023 0.02674095 0.03147145 0.03738855 0.03311953
11 0.04395773 0.04040703 0.04062885 0.02951922 0.02820435 0.03112744 0.03206214
12 0.03864458 0.03980757 0.04556084 0.04439769 0.03630450 0.03223905 0.02988759
13 0.02854048 0.03630919 0.04240671 0.04443334 0.03984086 0.03473340 0.02923174
14 0.02359630 0.02953014 0.03837929 0.04686059 0.04397895 0.03897510 0.03287946
15 0.03052648 0.02982214 0.02978196 0.03476271 0.04098952 0.04347177 0.03808583
16 0.02072607 0.02725377 0.02921907 0.03719728 0.04398977 0.05226047 0.05056954
17 0.02088943 0.02689269 0.03355502 0.02936479 0.03716455 0.04620286 0.04399933
18 0.02718952 0.03248387 0.03094881 0.03506414 0.03984806 0.05206168 0.04872054
19 0.02364297 0.02900516 0.03139622 0.04173118 0.04819941 0.05227852 0.05668299
20 0.02305417 0.02339367 0.03538043 0.03918228 0.04605203 0.05173041 0.04884125
21 0.02609314 0.02628681 0.03082733 0.03312528 0.04650396 0.05236945 0.04287889
22 0.02736597 0.03792213 0.04477310 0.04165758 0.04532543 0.04802251 0.03679611
23 0.02321609 0.02849964 0.03831655 0.04434075 0.04462177 0.03868448 0.04073778
24 0.02641648 0.03122632 0.03381347 0.03948530 0.04407745 0.04501592 0.03711052
25 0.02542370 0.03187137 0.03403025 0.03975619 0.04395667 0.04466374 0.03747042
26 0.03092646 0.03429538 0.03366377 0.03847738 0.04310130 0.04847523 0.04200355
27 0.03573825 0.04014045 0.03919029 0.04643889 0.04847204 0.05155795 0.04734424
28 0.02351623 0.03971846 0.05802734 0.05252182 0.05257465 0.05203412 0.04299946
29 0.02067262 0.02215159 0.04055870 0.05702609 0.05148825 0.04502609 0.04052533
30 0.02132178 0.02443531 0.03057353 0.04115011 0.04874556 0.05276439 0.03730668
31 0.02190508 0.02386180 0.02936034 0.04549659 0.06381286 0.05791462 0.04555547
32 0.02888715 0.01988738 0.02143672 0.03488923 0.04199285 0.05486861 0.05054325
33 0.02071934 0.02522337 0.02335027 0.02915431 0.03147144 0.04767337 0.05230126
34 0.03307390 0.02475282 0.02703840 0.02706727 0.02854179 0.03868098 0.04240298
35 0.04455455 0.04201330 0.03467006 0.03159846 0.02904501 0.03032518 0.03047486
36 0.03895468 0.03694620 0.03765539 0.03188647 0.02865736 0.02864025 0.02632375
37 0.03892909 0.04176965 0.03711625 0.04127505 0.03432667 0.02875407 0.02521346
38 0.02892015 0.03206253 0.03492790 0.03925151 0.04464093 0.03889116 0.02649013
39 0.03860645 0.03802383 0.03363588 0.03387933 0.04302377 0.04352935 0.02922534
40 0.03807614 0.04361203 0.03929292 0.03980630 0.03922617 0.03725261 0.03192486
41 0.03888337 0.04308931 0.04442987 0.04493874 0.04459792 0.04023680 0.03833448
          38.x        40.x        43.x         46.x         49.x         52.x
1  0.006034799 0.007790126 0.001487534 0.0003502434 0.000000e+00 0.000000e+00
2  0.010952151 0.006092833 0.001148719 0.0003477593 0.000000e+00 0.000000e+00
3  0.012157372 0.006642969 0.000698628 0.0005019478 1.264455e-05 0.000000e+00
4  0.016129352 0.010165167 0.003118109 0.0007468921 0.000000e+00 0.000000e+00
5  0.026688104 0.020632121 0.004873007 0.0014016503 1.280041e-04 0.000000e+00
6  0.029427265 0.022794895 0.009007373 0.0018139788 6.822673e-05 0.000000e+00
7  0.030409418 0.028494764 0.011796300 0.0015684112 6.054164e-04 0.000000e+00
8  0.029442714 0.029425427 0.012244856 0.0036294259 3.723612e-04 0.000000e+00
9  0.035159445 0.040821432 0.017847621 0.0051072500 1.086794e-03 0.000000e+00
10 0.047866811 0.056887527 0.020462732 0.0066901305 4.369861e-04 0.000000e+00
11 0.031140497 0.036305720 0.019697583 0.0062055204 9.361278e-04 4.775247e-05
12 0.026561058 0.044260598 0.023070611 0.0074170802 1.347098e-03 4.290839e-05
13 0.030758431 0.040769484 0.028535129 0.0104188369 1.469046e-03 1.291052e-04
14 0.029956887 0.035781255 0.026305547 0.0086363978 2.878196e-03 1.299134e-04
15 0.024410373 0.034581314 0.024902111 0.0113453650 1.523567e-03 1.330895e-04
16 0.045400842 0.061302225 0.051831374 0.0158814665 3.849903e-03 3.070112e-04
17 0.040073667 0.043932710 0.029243903 0.0125265916 5.740532e-03 6.970547e-04
18 0.037228351 0.035562323 0.023763424 0.0129667307 6.573297e-03 8.060138e-04
19 0.041617353 0.043338296 0.024931351 0.0110295877 3.761878e-03 4.546179e-04
20 0.034899875 0.037236044 0.023662181 0.0116390930 2.657947e-03 5.355389e-04
21 0.038949193 0.043255793 0.034689497 0.0286265079 1.574144e-02 3.295900e-03
22 0.039600836 0.048044834 0.026782395 0.0070404826 1.540684e-03 1.052291e-04
23 0.028728077 0.042110292 0.031808909 0.0168865465 3.899691e-03 1.093961e-04
24 0.026123307 0.034096171 0.030706852 0.0174917942 5.941221e-03 5.666289e-04
25 0.029612764 0.036170949 0.024544899 0.0138885811 2.674602e-03 4.042675e-04
26 0.030696030 0.038033027 0.029090753 0.0148613415 3.149954e-03 3.672144e-04
27 0.030082241 0.032381734 0.016573952 0.0094880080 2.737678e-03 1.823938e-04
28 0.035659753 0.029850617 0.020838891 0.0087481106 2.746275e-03 3.188993e-04
29 0.029613290 0.028995146 0.014767050 0.0068758882 1.877532e-03 1.425819e-04
30 0.030291119 0.046149685 0.029885122 0.0185193899 4.517480e-03 1.242819e-03
31 0.036876626 0.036630808 0.015800194 0.0097781245 1.682103e-03 1.431744e-04
32 0.039319362 0.050891882 0.026164571 0.0124470271 2.130619e-03 5.784773e-04
33 0.035934322 0.036659541 0.018628451 0.0080495100 3.451511e-03 4.621437e-04
34 0.033565453 0.038606017 0.022316329 0.0114416959 4.673157e-03 6.317276e-04
35 0.028236761 0.032805053 0.027129096 0.0116859714 5.815636e-03 7.534690e-04
36 0.018181671 0.023071079 0.021588821 0.0138792897 5.903399e-03 1.234170e-03
37 0.017613087 0.016771925 0.013419441 0.0103170222 3.873139e-03 9.725983e-04
38 0.019978177 0.025823325 0.027867911 0.0169112639 6.557695e-03 1.067207e-03
39 0.023980448 0.020314249 0.016194623 0.0128414775 4.473764e-03 4.923429e-04
40 0.023533864 0.019405105 0.018044388 0.0172446638 6.720685e-03 1.829045e-03
41 0.029879758 0.020441088 0.012904198 0.0198596210 9.708978e-03 3.435553e-03
           58.x         55.x          6.y          8.y         10.y        12.y
1  0.000000e+00 0.000000e+00 2.402148e-04 2.643322e-04 0.0012825405 0.017419975
2  0.000000e+00 0.000000e+00 3.220303e-04 9.921929e-04 0.0117765945 0.034805728
3  0.000000e+00 0.000000e+00 4.495927e-04 7.958473e-04 0.0062702299 0.017878248
4  0.000000e+00 0.000000e+00 2.671022e-05 2.014012e-03 0.0029400585 0.005340228
5  0.000000e+00 0.000000e+00 3.270228e-04 5.607857e-04 0.0049766511 0.016180578
6  0.000000e+00 0.000000e+00 3.724414e-05 1.295886e-04 0.0038968613 0.013885295
7  0.000000e+00 0.000000e+00 2.550683e-04 7.719369e-04 0.0023578281 0.013402955
8  0.000000e+00 0.000000e+00 0.000000e+00 6.790360e-04 0.0074963897 0.032269012
9  0.000000e+00 0.000000e+00 0.000000e+00 5.580761e-04 0.0020140695 0.007423412
10 0.000000e+00 0.000000e+00 1.171100e-04 2.154849e-04 0.0049219000 0.003750031
11 0.000000e+00 0.000000e+00 0.000000e+00 7.727650e-06 0.0011391964 0.015978859
12 0.000000e+00 0.000000e+00 0.000000e+00 4.092203e-04 0.0031190752 0.005808102
13 5.899694e-05 0.000000e+00 0.000000e+00 3.422122e-04 0.0019083600 0.008025734
14 0.000000e+00 0.000000e+00 0.000000e+00 5.979102e-05 0.0010176656 0.003701888
15 0.000000e+00 0.000000e+00 3.140353e-05 2.826826e-04 0.0015085424 0.009413368
16 0.000000e+00 0.000000e+00 2.950665e-05 2.134282e-04 0.0013606000 0.004838644
17 0.000000e+00 0.000000e+00 3.116927e-05 6.368614e-04 0.0086907409 0.017385043
18 1.487525e-04 0.000000e+00 0.000000e+00 1.655111e-04 0.0021606993 0.005661424
19 0.000000e+00 0.000000e+00 5.330307e-05 2.856311e-04 0.0044342030 0.006274262
20 0.000000e+00 4.359471e-05 5.588073e-05 4.123839e-04 0.0030589843 0.003986809
21 0.000000e+00 6.006708e-04 4.496896e-05 3.112960e-04 0.0012261895 0.003940464
22 3.338512e-05 0.000000e+00 0.000000e+00 3.539862e-04 0.0026577512 0.006702155
23 0.000000e+00 0.000000e+00 4.535501e-05 2.166429e-04 0.0012436319 0.004717779
24 0.000000e+00 0.000000e+00 0.000000e+00 6.141775e-04 0.0043253390 0.012145032
25 0.000000e+00 0.000000e+00 3.121621e-04 1.858570e-04 0.0009504447 0.006060045
26 0.000000e+00 0.000000e+00 0.000000e+00 1.383916e-03 0.0019538721 0.003086845
27 0.000000e+00 0.000000e+00 0.000000e+00 5.651389e-04 0.0027710069 0.007391769
28 0.000000e+00 0.000000e+00 1.526682e-04 1.033387e-03 0.0017625042 0.005038744
29 0.000000e+00 0.000000e+00 1.228369e-04 6.148974e-05 0.0016362295 0.010269758
30 0.000000e+00 0.000000e+00 0.000000e+00 7.536944e-05 0.0034028304 0.014133219
31 0.000000e+00 0.000000e+00 1.256293e-04 3.075395e-04 0.0019855563 0.004064890
32 4.858550e-05 0.000000e+00 0.000000e+00 7.171202e-04 0.0017202643 0.003266607
33 0.000000e+00 5.919011e-05 4.914547e-05 1.311344e-04 0.0012843498 0.018050458
34 0.000000e+00 6.037577e-05 1.647580e-04 1.079544e-03 0.0024757883 0.005344121
35 0.000000e+00 0.000000e+00 4.521345e-05 6.660967e-04 0.0028069411 0.009804244
36 5.680929e-05 2.530655e-04 2.164529e-04 1.754106e-03 0.0062409230 0.010777177
37 0.000000e+00 0.000000e+00 1.082633e-04 2.316160e-04 0.0040051637 0.013301233
38 0.000000e+00 4.683649e-05 0.000000e+00 9.515595e-05 0.0007121617 0.004902279
39 0.000000e+00 0.000000e+00 1.339294e-05 1.380984e-04 0.0017201538 0.006375493
40 0.000000e+00 4.179603e-05 0.000000e+00 0.000000e+00 0.0006154474 0.003123492
41 0.000000e+00 8.522289e-05 0.000000e+00 2.815506e-05 0.0006387148 0.002309288
          14.y        16.y       18.y       20.y       22.y       24.y
1  0.027502346 0.024938139 0.03005057 0.04165820 0.04918795 0.05678500
2  0.019841033 0.035140988 0.04711463 0.04046963 0.03557653 0.03989290
3  0.033021678 0.056106842 0.04115241 0.03822740 0.04483977 0.04194614
4  0.015623949 0.029200674 0.04454773 0.06361591 0.05592632 0.04278478
5  0.011165772 0.014045111 0.02559786 0.04405068 0.05002766 0.05706383
6  0.015133375 0.025811874 0.02625054 0.03317591 0.03932229 0.05018534
7  0.032961435 0.044081643 0.02958345 0.03306189 0.02774367 0.03082452
8  0.018372762 0.017861789 0.05632164 0.04442080 0.04579709 0.03218282
9  0.032266080 0.033273191 0.02705397 0.03945419 0.04780777 0.04267137
10 0.004555168 0.020618003 0.03967861 0.05485206 0.05193993 0.04923826
11 0.027312907 0.017197627 0.01818882 0.03461441 0.04953111 0.06168273
12 0.008135992 0.025976794 0.02655629 0.02460323 0.03100942 0.04939994
13 0.017299641 0.026297132 0.03534055 0.03020283 0.02634890 0.03650886
14 0.009244763 0.017052660 0.02176931 0.03023354 0.03506982 0.03279930
15 0.017671802 0.015933404 0.02562085 0.03220234 0.03504911 0.03662624
16 0.005937808 0.011296960 0.01414399 0.01880169 0.02531356 0.03174496
17 0.008694222 0.012934054 0.01433042 0.01830362 0.02280704 0.03361167
18 0.016873200 0.012823706 0.01442015 0.02406138 0.02566447 0.04005789
19 0.009031570 0.019182135 0.01741476 0.02020401 0.02285842 0.03519936
20 0.010422965 0.012602816 0.02265005 0.03861708 0.03620389 0.02775328
21 0.008486241 0.011566482 0.01390718 0.02268169 0.03611082 0.03769020
22 0.007794371 0.014403604 0.01787625 0.01969239 0.02723105 0.04428552
23 0.010977525 0.017765481 0.02538525 0.02207736 0.02641667 0.03186791
24 0.014187299 0.018449607 0.02490859 0.02915572 0.03021970 0.03047246
25 0.015864372 0.024526934 0.02858123 0.03105883 0.02818163 0.03174328
26 0.004759530 0.011340398 0.02600644 0.03985069 0.03941183 0.03974212
27 0.008155312 0.008923741 0.01021163 0.01727545 0.02958641 0.04716740
28 0.009731963 0.011454425 0.01437046 0.01944990 0.02035643 0.03366766
29 0.010740998 0.017621281 0.02477577 0.01624458 0.01892178 0.02861179
30 0.015247984 0.032690414 0.02664419 0.02470342 0.02067049 0.01849813
31 0.007403511 0.015357884 0.02618124 0.02444756 0.02864798 0.02275130
32 0.007724465 0.013695381 0.02530836 0.02958631 0.03161870 0.03530343
33 0.040343851 0.025479184 0.02152800 0.02186656 0.03247178 0.03788576
34 0.016931137 0.033200425 0.03443197 0.02971514 0.03215059 0.03384917
35 0.020605879 0.024530584 0.03416539 0.03987966 0.04108600 0.04346666
36 0.016228529 0.032793360 0.03671435 0.03849047 0.04267078 0.04388913
37 0.033634140 0.032279385 0.03803027 0.03930795 0.04630456 0.04800257
38 0.014471441 0.035426267 0.04812919 0.03964329 0.03329451 0.03638651
39 0.023522875 0.028361456 0.02973539 0.04325478 0.05140417 0.05230209
40 0.010397951 0.029095679 0.03024748 0.03402632 0.04585746 0.05074125
41 0.008339860 0.014550859 0.03025924 0.03401746 0.03804225 0.04830548
         26.y       28.y       30.y       32.y       34.y        36.y
1  0.07563703 0.08097626 0.06513918 0.02824759 0.00930292 0.002755237
2  0.05076409 0.06199602 0.06037018 0.04294478 0.01753138 0.004966247
3  0.04543726 0.05298383 0.05230374 0.03905275 0.01848457 0.004298860
4  0.05290651 0.05746663 0.06291392 0.04772624 0.02987755 0.010893440
5  0.05795893 0.04820338 0.06122283 0.06235195 0.03471272 0.014518275
6  0.04975647 0.05855726 0.06495102 0.06419868 0.03623243 0.018913293
7  0.03360575 0.03881651 0.05234207 0.06272119 0.05476252 0.023445626
8  0.03381730 0.03440003 0.03470737 0.05898223 0.05845649 0.026857429
9  0.04161130 0.04274186 0.04865342 0.06142766 0.05985764 0.031527050
10 0.04947280 0.04084172 0.04600924 0.04350414 0.04889670 0.032964051
11 0.05497518 0.04545835 0.04783139 0.05224962 0.05290749 0.034437181
12 0.06322509 0.06361800 0.05635313 0.05996387 0.05536830 0.032379264
13 0.05068089 0.05751719 0.06286256 0.06206138 0.05804061 0.038561104
14 0.05361890 0.06770903 0.07830874 0.07177204 0.06224892 0.038151296
15 0.04219034 0.05528489 0.06654568 0.07024875 0.06598315 0.041220083
16 0.03513878 0.04393413 0.06858214 0.07317090 0.07005698 0.049147305
17 0.03821007 0.04602362 0.06783187 0.08090127 0.07986192 0.054271596
18 0.04940158 0.05556906 0.06666940 0.08314973 0.07010649 0.038332882
19 0.05266767 0.05381741 0.07362047 0.07407362 0.06261456 0.041807051
20 0.03593641 0.05970328 0.07346141 0.07546247 0.06458715 0.036756101
21 0.03808303 0.04768212 0.06940331 0.07423939 0.06951698 0.041314406
22 0.05462558 0.06645349 0.07305876 0.06364449 0.05648454 0.041912881
23 0.04328519 0.06440420 0.07353311 0.06750314 0.06310743 0.039342869
24 0.04341415 0.05814228 0.07071251 0.06613406 0.05205000 0.031554280
25 0.03898578 0.05260124 0.06333457 0.07175743 0.05748615 0.038005587
26 0.04355657 0.04797648 0.06190543 0.06253124 0.05230276 0.033309673
27 0.05305928 0.05515448 0.07086601 0.08580876 0.07009781 0.034244134
28 0.05846011 0.07024340 0.06865553 0.07378959 0.06019421 0.035671494
29 0.03592941 0.06445300 0.08543295 0.07726245 0.07124100 0.047933776
30 0.02896756 0.05144694 0.06786097 0.07379281 0.05323567 0.033291259
31 0.02890774 0.05860539 0.08225647 0.09013021 0.05675344 0.035456034
32 0.02949383 0.03864766 0.05863189 0.07160159 0.06752017 0.058485689
33 0.03495936 0.03618624 0.04490796 0.06804981 0.08084164 0.045454333
34 0.04237706 0.03930700 0.04505863 0.05331082 0.06136817 0.043919221
35 0.04353480 0.03950942 0.03440814 0.04402391 0.04959581 0.036022475
36 0.05032844 0.04747815 0.04488945 0.04218282 0.03895175 0.028285818
37 0.04576874 0.04374097 0.04869301 0.03812290 0.03482493 0.019551339
38 0.03956231 0.04802325 0.05459144 0.04694738 0.03494403 0.028971153
39 0.04694594 0.04610502 0.05384708 0.05255002 0.03233142 0.024447689
40 0.04832832 0.05019852 0.05583908 0.05206947 0.03695355 0.025353873
41 0.06185914 0.05634764 0.05883615 0.05908838 0.04434160 0.025091202
           38.y         40.y         43.y         46.y         49.y
1  0.0005287373 3.711370e-04 0.000000e+00 0.000000e+00 0.000000e+00
2  0.0010134372 9.216788e-05 0.000000e+00 0.000000e+00 0.000000e+00
3  0.0020513305 6.354692e-05 0.000000e+00 6.695807e-05 0.000000e+00
4  0.0025007158 5.909498e-04 0.000000e+00 0.000000e+00 0.000000e+00
5  0.0048217216 1.124987e-03 7.950649e-05 0.000000e+00 0.000000e+00
6  0.0098303547 2.497520e-03 0.000000e+00 0.000000e+00 0.000000e+00
7  0.0080461335 2.349632e-03 1.156159e-04 0.000000e+00 0.000000e+00
8  0.0081580420 1.374195e-03 0.000000e+00 0.000000e+00 0.000000e+00
9  0.0126841602 2.450348e-03 2.309232e-04 0.000000e+00 0.000000e+00
10 0.0096606121 2.163650e-03 2.039996e-04 1.304769e-05 0.000000e+00
11 0.0122982870 2.504774e-03 1.147410e-04 9.735667e-06 6.395579e-05
12 0.0125682276 3.378967e-03 1.108448e-04 0.000000e+00 0.000000e+00
13 0.0128840475 3.382234e-03 1.614088e-04 0.000000e+00 0.000000e+00
14 0.0166342941 5.472464e-03 2.564695e-04 7.325092e-05 0.000000e+00
15 0.0163007540 5.952578e-03 4.760392e-04 0.000000e+00 0.000000e+00
16 0.0256440854 1.150638e-02 1.135121e-03 8.832962e-04 0.000000e+00
17 0.0304353511 7.467837e-03 1.320496e-03 2.203180e-04 0.000000e+00
18 0.0177540609 9.277026e-03 8.854199e-04 8.090093e-05 0.000000e+00
19 0.0164122049 6.529607e-03 5.122595e-04 2.159076e-04 2.898394e-05
20 0.0188697225 6.019992e-03 1.161399e-03 3.469247e-04 1.119473e-05
21 0.0169152759 8.089815e-03 1.327536e-03 1.984633e-03 1.102699e-05
22 0.0209565577 5.550820e-03 1.397042e-03 5.718079e-05 0.000000e+00
23 0.0245432688 8.693921e-03 8.964338e-04 0.000000e+00 3.773531e-05
24 0.0172800565 7.679466e-03 8.009546e-04 4.548547e-04 4.123933e-04
25 0.0196206430 8.472110e-03 1.079861e-03 1.001767e-04 0.000000e+00
26 0.0182679022 8.610177e-03 7.818760e-04 5.124783e-05 0.000000e+00
27 0.0236537163 7.387627e-03 5.712692e-04 1.550588e-04 1.360306e-04
28 0.0197114761 9.295211e-03 7.609974e-04 3.398456e-04 0.000000e+00
29 0.0281630309 1.148635e-02 1.645224e-04 1.901014e-05 1.669978e-04
30 0.0245908356 1.144141e-02 9.541923e-04 0.000000e+00 0.000000e+00
31 0.0172670071 8.470251e-03 8.906216e-04 2.851685e-04 3.429998e-05
32 0.0295273688 1.542731e-02 1.427144e-03 0.000000e+00 0.000000e+00
33 0.0240940160 9.457467e-03 1.037964e-03 0.000000e+00 0.000000e+00
34 0.0254390526 1.296839e-02 1.581612e-03 1.649788e-04 0.000000e+00
35 0.0198562573 9.387194e-03 1.223237e-03 1.951646e-04 3.682915e-05
36 0.0182897383 1.201575e-02 1.809765e-03 2.502139e-04 0.000000e+00
37 0.0114860518 7.722655e-03 1.226647e-03 5.779692e-05 0.000000e+00
38 0.0216277464 1.628053e-02 2.298271e-03 5.966443e-05 0.000000e+00
39 0.0178379656 1.268700e-02 2.309665e-03 1.830583e-04 5.405216e-05
40 0.0273548502 2.603272e-02 2.341315e-03 2.490415e-04 1.174040e-04
41 0.0179654380 1.483815e-02 3.125446e-03 1.322506e-04 0.000000e+00
           52.y         58.y 55.y
1  0.000000e+00 0.000000e+00    0
2  0.000000e+00 0.000000e+00    0
3  0.000000e+00 0.000000e+00    0
4  0.000000e+00 0.000000e+00    0
5  0.000000e+00 0.000000e+00    0
6  0.000000e+00 0.000000e+00    0
7  0.000000e+00 0.000000e+00    0
8  0.000000e+00 0.000000e+00    0
9  0.000000e+00 0.000000e+00    0
10 0.000000e+00 0.000000e+00    0
11 0.000000e+00 0.000000e+00    0
12 0.000000e+00 0.000000e+00    0
13 0.000000e+00 0.000000e+00    0
14 0.000000e+00 0.000000e+00    0
15 1.482119e-05 0.000000e+00    0
16 0.000000e+00 0.000000e+00    0
17 0.000000e+00 0.000000e+00    0
18 0.000000e+00 0.000000e+00    0
19 0.000000e+00 0.000000e+00    0
20 1.119473e-05 0.000000e+00    0
21 0.000000e+00 0.000000e+00    0
22 0.000000e+00 1.833099e-05    0
23 0.000000e+00 0.000000e+00    0
24 0.000000e+00 0.000000e+00    0
25 0.000000e+00 4.485364e-05    0
26 0.000000e+00 0.000000e+00    0
27 0.000000e+00 0.000000e+00    0
28 0.000000e+00 0.000000e+00    0
29 5.230686e-05 0.000000e+00    0
30 4.727772e-05 0.000000e+00    0
31 0.000000e+00 0.000000e+00    0
32 0.000000e+00 0.000000e+00    0
33 0.000000e+00 0.000000e+00    0
34 0.000000e+00 0.000000e+00    0
35 0.000000e+00 0.000000e+00    0
36 0.000000e+00 0.000000e+00    0
37 0.000000e+00 0.000000e+00    0
38 0.000000e+00 0.000000e+00    0
39 2.386135e-05 0.000000e+00    0
40 0.000000e+00 0.000000e+00    0
41 0.000000e+00 0.000000e+00    0</code></pre>
</div>
</div>
</section>
</section>
<section id="marginal-ages" class="level2">
<h2 class="anchored" data-anchor-id="marginal-ages">Marginal Ages</h2>
<p>Let’s do the same workup starting with the <code>gapindex</code> <code>production_agecomp_stratum</code>. If these faithfully match we can more confidently move forward with the CAAL calculation (though remember the marginal ages are ghosted).</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Comparison of marginal age comps, early years</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Comparison of marginal age comps, later years</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2024_survey_comp_deepdive_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">All of the lines are overlapping.</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2024_survey_comp_deepdive_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">All of the lines are overlapping.</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p><strong>I am confident I can use the</strong> <code>gapindex</code> <code>production_agecomp</code> <strong>object to get to a faithful reproduction of the 2020 marginal age comps (these are not fit to in the model).</strong></p>
<section id="render-age-comps-ss3-format" class="level3">
<h3 class="anchored" data-anchor-id="render-age-comps-ss3-format">Render age comps SS3 format</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>     Yr Seas FltSvy Gender Part Ageerr Lbin_lo Lbin_hi Nsamp          1.x
1  1982    7     -2      3    0      1      -1      -1    15 0.0008512298
2  1985    7     -2      3    0      1      -1      -1    23 0.0000000000
3  1992    7     -2      3    0      1      -1      -1    11 0.0000000000
4  1993    7     -2      3    0      1      -1      -1     5 0.0000000000
5  1994    7     -2      3    0      1      -1      -1     7 0.0000000000
6  1995    7     -2      3    0      1      -1      -1    10 0.0000000000
7  1999    7     -2      3    0      1      -1      -1    18 0.0000000000
8  2000    7     -2      3    0      1      -1      -1    19 0.0000000000
9  2001    7     -2      3    0      1      -1      -1    21 0.0000000000
10 2002    7     -2      3    0      1      -1      -1    19 0.0001231109
11 2003    7     -2      3    0      1      -1      -1    36 0.0000000000
12 2004    7     -2      3    0      1      -1      -1    16 0.0000000000
13 2005    7     -2      3    0      1      -1      -1    18 0.0000000000
14 2006    7     -2      3    0      1      -1      -1    27 0.0000000000
15 2007    7     -2      3    0      1      -1      -1    38 0.0000000000
16 2008    7     -2      3    0      1      -1      -1    45 0.0000000000
17 2009    7     -2      3    0      1      -1      -1    51 0.0009666268
18 2010    7     -2      3    0      1      -1      -1    62 0.0001219890
19 2011    7     -2      3    0      1      -1      -1    53 0.0000000000
20 2012    7     -2      3    0      1      -1      -1    53 0.0000000000
21 2013    7     -2      3    0      1      -1      -1    69 0.0003416989
22 2014    7     -2      3    0      1      -1      -1    63 0.0000000000
23 2015    7     -2      3    0      1      -1      -1   240 0.0004486368
24 2016    7     -2      3    0      1      -1      -1   243 0.0000000000
25 2017    7     -2      3    0      1      -1      -1   235 0.0001364133
26 2018    7     -2      3    0      1      -1      -1   269 0.0000000000
27 2019    7     -2      3    0      1      -1      -1   270 0.0000000000
28 2021    7     -2      3    0      1      -1      -1   279 0.0000000000
            2.x        3.x        4.x        5.x        6.x        7.x
1  0.0156791210 0.05944904 0.08550205 0.05021286 0.07660538 0.05271557
2  0.0054998255 0.04494130 0.10567223 0.06965718 0.04275178 0.05855820
3  0.0124714446 0.04015306 0.01370123 0.06192822 0.05939523 0.05782860
4  0.0000000000 0.00000000 0.02258937 0.03673600 0.06083306 0.03316823
5  0.0065660788 0.02677344 0.03792890 0.03310354 0.03160986 0.06433358
6  0.0009465409 0.02430364 0.03013802 0.04369469 0.02672041 0.04858472
7  0.0033700784 0.02674874 0.05385875 0.03594601 0.02413232 0.05385160
8  0.0012964692 0.01593346 0.04512579 0.02519728 0.03526994 0.02103734
9  0.0025265396 0.03339849 0.03624838 0.04843011 0.04050068 0.03368694
10 0.0064468880 0.03092354 0.03568295 0.03121493 0.05440081 0.04080049
11 0.0097583603 0.02137978 0.03090004 0.06347817 0.05647891 0.05610959
12 0.0153602633 0.06212609 0.02409052 0.05975524 0.05377984 0.03103879
13 0.0187949718 0.04090725 0.07774659 0.01433900 0.04341192 0.05864612
14 0.0076583349 0.05882558 0.05095962 0.06656504 0.03639356 0.03969312
15 0.0088148496 0.01128705 0.08222136 0.05477259 0.05031807 0.02624613
16 0.0040412709 0.01544772 0.03685496 0.06434463 0.04320661 0.05802987
17 0.0063907707 0.01362154 0.03273738 0.01706970 0.08759880 0.05735751
18 0.0140171842 0.02489591 0.03905988 0.03895224 0.02716254 0.07133739
19 0.0166250990 0.03662052 0.03032368 0.05043602 0.04603065 0.03475809
20 0.0051228967 0.03755128 0.02576446 0.04558826 0.08407430 0.04885744
21 0.0041341344 0.01971632 0.05381647 0.03657289 0.03694064 0.03058411
22 0.0149444314 0.05423609 0.01897536 0.04034018 0.03502957 0.03315669
23 0.0044138657 0.02108320 0.11897059 0.02549351 0.04583389 0.03909080
24 0.0069369850 0.05159537 0.02497743 0.09478682 0.05078600 0.04452002
25 0.0304718747 0.03953673 0.06766513 0.02918894 0.08971274 0.04394302
26 0.0107804411 0.11220178 0.06587255 0.03333175 0.03970908 0.05402470
27 0.0048895904 0.03139481 0.09751253 0.05861397 0.03652721 0.04522012
28 0.0138262951 0.03596573 0.02264013 0.07374523 0.11424342 0.05157679
          8.x        9.x       10.x        11.x        12.x        13.x
1  0.04335954 0.04209128 0.01356844 0.008379574 0.021244464 0.011079010
2  0.02440575 0.02980238 0.02803948 0.018983711 0.025325194 0.005109933
3  0.02448582 0.05167757 0.02840141 0.027247581 0.046841005 0.024205753
4  0.04502809 0.04469739 0.03120329 0.056375232 0.093103463 0.010975880
5  0.04209757 0.05375624 0.04640107 0.026100935 0.038438585 0.027820415
6  0.07870198 0.03444545 0.03719269 0.032728546 0.025338596 0.021910602
7  0.05006773 0.02846910 0.03398211 0.048610995 0.029256070 0.019577056
8  0.03281419 0.05259022 0.04640121 0.034308178 0.026677205 0.040162383
9  0.04237947 0.05005210 0.02940936 0.016973169 0.021356791 0.019069032
10 0.03517510 0.02957312 0.02853643 0.048797212 0.018870441 0.013339770
11 0.01759646 0.01774289 0.03376938 0.008178563 0.023177671 0.005827570
12 0.03046307 0.01218490 0.03789806 0.029504756 0.023801351 0.025936725
13 0.04527360 0.01022822 0.02414762 0.021103852 0.024458206 0.020864044
14 0.03338654 0.04249705 0.03553786 0.012541381 0.017065731 0.017003831
15 0.04611679 0.03433286 0.02997006 0.020700141 0.017354770 0.027580499
16 0.04723459 0.04121186 0.03572829 0.030918660 0.009659456 0.018140533
17 0.07102863 0.03582605 0.03002247 0.011901491 0.020966558 0.028681727
18 0.04839024 0.04804868 0.02948266 0.015542650 0.021767099 0.018448369
19 0.04705987 0.04644038 0.02507095 0.028184986 0.023381098 0.018692922
20 0.03753614 0.07195834 0.03444612 0.020732655 0.020547363 0.013454222
21 0.04238815 0.03654528 0.06800924 0.030546728 0.034908666 0.018209280
22 0.02214558 0.04659050 0.04492967 0.034285698 0.026304780 0.018016277
23 0.02499818 0.02179877 0.03795534 0.015995977 0.037822550 0.021170776
24 0.03477355 0.02564343 0.02823392 0.035835054 0.025994268 0.014405869
25 0.03119212 0.01702593 0.02516885 0.025619613 0.018350630 0.017630862
26 0.04264328 0.02388659 0.02037021 0.024181000 0.014864501 0.008147700
27 0.05670330 0.02552979 0.02481646 0.019240823 0.017861017 0.008931333
28 0.02656662 0.02766006 0.02673136 0.012557851 0.010613028 0.006179181
          14.x        15.x        16.x         17.x         18.x         19.x
1  0.002938749 0.004182848 0.000000000 0.0000000000 0.0000000000 0.0000000000
2  0.001322791 0.004859795 0.007629372 0.0005961186 0.0002986416 0.0009247744
3  0.010049397 0.004404001 0.004302914 0.0029006003 0.0014453400 0.0000000000
4  0.018965627 0.011070498 0.001392229 0.0000000000 0.0000000000 0.0000000000
5  0.019911236 0.011636717 0.004157213 0.0025741305 0.0009207468 0.0000000000
6  0.016123348 0.013390689 0.008845511 0.0063678529 0.0035410436 0.0004229717
7  0.011579020 0.012101856 0.011429001 0.0105425938 0.0084859997 0.0026009622
8  0.026596382 0.016423364 0.015871232 0.0220066924 0.0087717309 0.0078211214
9  0.020972709 0.017898937 0.007783148 0.0197755424 0.0080293426 0.0054402388
10 0.012388958 0.016479268 0.011952267 0.0092181938 0.0165379070 0.0111311477
11 0.022176346 0.015932958 0.029426608 0.0107595883 0.0263778559 0.0078029427
12 0.011315180 0.008994794 0.017690196 0.0042345536 0.0065485078 0.0072998474
13 0.029270802 0.008905248 0.002470498 0.0060725952 0.0123921600 0.0047286128
14 0.010821756 0.005923337 0.002965076 0.0112401068 0.0045951513 0.0026563718
15 0.018359686 0.013846428 0.012290034 0.0089762410 0.0134710842 0.0070394375
16 0.006946623 0.008952812 0.007675223 0.0072096276 0.0107382507 0.0038669204
17 0.021209801 0.009887499 0.005063130 0.0064313872 0.0075889384 0.0069509511
18 0.020991777 0.003333544 0.006507558 0.0035835318 0.0033568846 0.0051547381
19 0.018297108 0.015363099 0.008819182 0.0158403434 0.0129184961 0.0051005600
20 0.005255955 0.006380035 0.010152438 0.0059833893 0.0014972888 0.0009662616
21 0.016959921 0.011075995 0.010027203 0.0080293695 0.0020258079 0.0035751473
22 0.014648304 0.017002987 0.013473885 0.0029700887 0.0041680246 0.0038652647
23 0.018714489 0.009198646 0.009580147 0.0059946146 0.0047799907 0.0054249449
24 0.011899395 0.012902666 0.007572380 0.0092728382 0.0040637349 0.0053880881
25 0.009458367 0.005976874 0.007272397 0.0070070080 0.0050127312 0.0026996926
26 0.010573349 0.009687389 0.005159816 0.0074583950 0.0017026548 0.0018751612
27 0.012053231 0.020074900 0.010280382 0.0084078728 0.0032819631 0.0031949725
28 0.015440564 0.004210658 0.009492189 0.0028502584 0.0053604913 0.0034418689
          20.x         21.x          1.y          2.y        3.y        4.y
1  0.000000000 0.0000000000 0.0000000000 0.0223211199 0.06378192 0.07178708
2  0.000000000 0.0005783783 0.0000000000 0.0078482359 0.04789230 0.11511442
3  0.000000000 0.0005799133 0.0000000000 0.0120323501 0.05187589 0.02111264
4  0.000000000 0.0000000000 0.0000000000 0.0000000000 0.01596664 0.01623219
5  0.000000000 0.0000000000 0.0000000000 0.0067983021 0.02617357 0.04065425
6  0.000000000 0.0014183835 0.0000000000 0.0005539166 0.01973197 0.06066905
7  0.002244774 0.0009775553 0.0000000000 0.0075751089 0.03342150 0.03520100
8  0.003840006 0.0090426762 0.0000000000 0.0000000000 0.01853866 0.06011210
9  0.005253688 0.0109233385 0.0000000000 0.0057434878 0.04172690 0.06087406
10 0.010614172 0.0342602739 0.0000000000 0.0065751497 0.04228807 0.06363037
11 0.003013606 0.0144906633 0.0000000000 0.0077749862 0.02988358 0.06241574
12 0.001894012 0.0102505120 0.0001693155 0.0163990605 0.07088451 0.02126968
13 0.002470498 0.0208919272 0.0000000000 0.0189509925 0.06252358 0.07427972
14 0.005474910 0.0201585383 0.0000000000 0.0107466064 0.06206783 0.05814748
15 0.002443054 0.0178519762 0.0000000000 0.0024491362 0.02446321 0.08560230
16 0.000821480 0.0169047387 0.0000000000 0.0109303405 0.02113460 0.04803456
17 0.004973122 0.0104074525 0.0023564582 0.0057521996 0.02497694 0.03733565
18 0.001207258 0.0075734858 0.0000000000 0.0112183187 0.02608065 0.04618579
19 0.003686410 0.0147496734 0.0000000000 0.0255527569 0.03777969 0.04443957
20 0.002563183 0.0127256673 0.0000000000 0.0068870276 0.02904174 0.03559845
21 0.003913370 0.0114359064 0.0004900834 0.0091612358 0.02262662 0.06597901
22 0.002924786 0.0078317028 0.0000000000 0.0160040709 0.07597662 0.03171671
23 0.002859165 0.0134648878 0.0010933352 0.0088417033 0.02388156 0.09621771
24 0.006326931 0.0123851528 0.0000000000 0.0000000000 0.04517647 0.04815453
25 0.006317335 0.0044792727 0.0005139146 0.0317066352 0.04429022 0.07996500
26 0.001489807 0.0061062858 0.0000000000 0.0155133444 0.08979103 0.06302546
27 0.001842127 0.0043500302 0.0000000000 0.0063967391 0.05700841 0.09980677
28 0.002397268 0.0098795505 0.0000000000 0.0100524727 0.05546928 0.05185507
           5.y        6.y        7.y        8.y        9.y        10.y
1  0.093237212 0.08721960 0.05315186 0.03961809 0.01121317 0.013980166
2  0.058158257 0.06115599 0.04470952 0.04124721 0.04395466 0.025726645
3  0.093081960 0.05109595 0.09044240 0.04788391 0.04380930 0.049943298
4  0.057505145 0.05083224 0.07143952 0.10538376 0.06988212 0.023340364
5  0.059637609 0.02545373 0.08965658 0.04343140 0.05276810 0.057361774
6  0.040871805 0.05409197 0.02772216 0.06660268 0.05945063 0.069629715
7  0.054215592 0.09001102 0.07626375 0.06598016 0.02986306 0.023588068
8  0.050698525 0.01830201 0.03074460 0.06660106 0.07765165 0.030526985
9  0.070692265 0.04506156 0.05192059 0.04579396 0.03558728 0.029827933
10 0.035391239 0.05345800 0.05665160 0.04037670 0.02316948 0.042441794
11 0.054030673 0.05165334 0.04427284 0.05672938 0.03189509 0.048133218
12 0.080878467 0.08134283 0.03194363 0.03594515 0.01456043 0.013155566
13 0.008553864 0.06560828 0.05486953 0.01955297 0.03903457 0.008650236
14 0.072198676 0.04915114 0.06409925 0.04727520 0.02681508 0.030868237
15 0.061569177 0.06962898 0.03371941 0.04578269 0.01488431 0.028715565
16 0.067717985 0.07636527 0.05430077 0.04190337 0.03028519 0.027501145
17 0.019622482 0.09314161 0.07488058 0.06613373 0.03121597 0.043873522
18 0.057691019 0.03930915 0.06447839 0.06763081 0.04171719 0.024223577
19 0.043544808 0.05703543 0.03799618 0.04097386 0.05576222 0.038859363
20 0.040517565 0.07459227 0.04748380 0.06551863 0.05275980 0.024319854
21 0.035107903 0.04012499 0.04485246 0.03823573 0.04497071 0.078451260
22 0.057932711 0.04727239 0.02411752 0.04716130 0.05403882 0.040344244
23 0.024315075 0.05198220 0.04607861 0.01906139 0.03795053 0.035557474
24 0.137440005 0.02688125 0.02260439 0.03060436 0.02075057 0.019704175
25 0.041087933 0.10364759 0.03339177 0.02236432 0.03373393 0.028015118
26 0.065015221 0.03740651 0.08149457 0.03608493 0.01504853 0.011189228
27 0.066041234 0.05224330 0.04789723 0.05526831 0.01763709 0.013853033
28 0.089334098 0.08548786 0.05445178 0.03926696 0.04059705 0.025340359
          11.y        12.y        13.y        14.y        15.y        16.y
1  0.021152073 0.005804239 0.011977629 0.011561926 0.001133619 0.000000000
2  0.033002049 0.015441658 0.012733931 0.008353820 0.006620985 0.003083481
3  0.021129368 0.017462508 0.021215663 0.003221018 0.000000000 0.000000000
4  0.040311510 0.050940411 0.014549989 0.003526371 0.000000000 0.011199278
5  0.024936734 0.026542473 0.028165279 0.015785330 0.003537943 0.013321145
6  0.045096775 0.027570771 0.004189839 0.033135925 0.021459351 0.009396924
7  0.027482199 0.009740865 0.027640884 0.010441251 0.005655243 0.008636447
8  0.021362289 0.014107025 0.035935420 0.008709689 0.020898746 0.011796673
9  0.024054722 0.011754757 0.019904557 0.012588908 0.012639633 0.016647838
10 0.031937121 0.007989410 0.021225865 0.010235748 0.007212591 0.015439300
11 0.006792497 0.024707552 0.005888962 0.056800962 0.005888962 0.011072668
12 0.013243823 0.013024447 0.028570621 0.016077590 0.017124810 0.002454217
13 0.019759173 0.034542030 0.020829628 0.015415656 0.009791866 0.004324777
14 0.012310646 0.003497647 0.009484001 0.015155670 0.005239714 0.010438834
15 0.016760095 0.018072242 0.002150682 0.031490219 0.010861991 0.002040696
16 0.027105427 0.011727680 0.008255310 0.012294707 0.010831931 0.004293668
17 0.023179881 0.026905254 0.013333942 0.002670976 0.005491274 0.005345739
18 0.015242149 0.033051549 0.019954964 0.011869866 0.016015978 0.008856852
19 0.016737113 0.015286841 0.017299288 0.008676500 0.011027987 0.004936695
20 0.024337484 0.012643230 0.019177741 0.014466272 0.021411926 0.011292937
21 0.030909399 0.016023449 0.017663233 0.013071669 0.005723014 0.008573291
22 0.030669978 0.024026467 0.019621255 0.014202014 0.012883441 0.014272490
23 0.044640232 0.026324009 0.017116081 0.017160691 0.010254636 0.012468952
24 0.024351388 0.018527729 0.027473610 0.014263228 0.007044073 0.006770074
25 0.019769802 0.010957122 0.010223835 0.014480233 0.010848288 0.004848573
26 0.017423280 0.018168772 0.011823535 0.005220543 0.006641608 0.008315902
27 0.012805453 0.012604812 0.012389069 0.011206896 0.010187467 0.008608896
28 0.014090475 0.008468065 0.004648593 0.004087241 0.007220382 0.011464993
           17.y        18.y        19.y         20.y        21.y
1  0.0006609728 0.001277464 0.000000000 0.0022626924 0.000000000
2  0.0000000000 0.000000000 0.000000000 0.0000000000 0.000000000
3  0.0036746591 0.000000000 0.000000000 0.0000000000 0.000000000
4  0.0000000000 0.000000000 0.002752098 0.0000000000 0.000000000
5  0.0008365252 0.000000000 0.000000000 0.0067467573 0.004062227
6  0.0015079589 0.001407954 0.000000000 0.0020949185 0.000000000
7  0.0120518698 0.007197113 0.007202548 0.0000000000 0.000000000
8  0.0061801877 0.017212025 0.004153864 0.0072488822 0.012032727
9  0.0160341292 0.010838718 0.003512582 0.0040788857 0.010609223
10 0.0023784552 0.017682765 0.005465250 0.0140243007 0.005959793
11 0.0013271174 0.003560079 0.003031527 0.0007985646 0.018964306
12 0.0195257673 0.014188434 0.005872976 0.0000000000 0.029201462
13 0.0112812987 0.008935481 0.001383188 0.0067333262 0.027856085
14 0.0046851473 0.001187500 0.010543079 0.0066030302 0.017522339
15 0.0082859397 0.009577161 0.006039931 0.0049530208 0.018960136
16 0.0332726826 0.001598728 0.017163425 0.0088354988 0.018513587
17 0.0067328653 0.006392784 0.005149810 0.0021525900 0.016674207
18 0.0076380806 0.009500161 0.005469796 0.0164426213 0.028487457
19 0.0028172190 0.009186757 0.007232281 0.0027174043 0.023738890
20 0.0072016775 0.005162299 0.001773128 0.0031390989 0.011517347
21 0.0134625830 0.004119671 0.008074822 0.0029213728 0.019701159
22 0.0018280305 0.002810868 0.002189356 0.0044735399 0.022618276
23 0.0074309489 0.008704187 0.005232788 0.0080454435 0.012549467
24 0.0075886835 0.005412169 0.006527513 0.0045690286 0.017856840
25 0.0012787439 0.003718384 0.005073402 0.0020446760 0.014173978
26 0.0072391203 0.004175657 0.002672564 0.0024604341 0.007223316
27 0.0099607189 0.003183472 0.000000000 0.0028077796 0.009366892
28 0.0041778458 0.006260418 0.002502409 0.0002407199 0.009605387</code></pre>
</div>
</div>
</section>
</section>
<section id="caals" class="level2">
<h2 class="anchored" data-anchor-id="caals">CAALs</h2>
<p>I was original able to get something that looked like the previous inputs by starting with the specimen CSV from <code>afscdata</code> and passing it through Carey’s code. I’d rather do this using the <code>gapindex</code> data and a clean, single pipe workflow.</p>
<p>Note that this ignores the values in <code>POPULATION_COUNT</code> and also is not calculating an actual frequency (e.g., inputs are &gt; 1). We simply ensure the data are classified into the right bins, then summarise the number of fish in each bin.</p>
<p>Also note that the <code>GAP_PRODUCTS.AGECOMP</code> table for the EBS currently only contains stratum- and region-level age composition values calculated using a global ALK conditioned on age data from the EBS Standard + NW area. The vignette on <code>gapindex</code> is a workaround if you wanted to get age composition values using a global ALK conditioned on age data from just the EBS Standard area.</p>
<p><strong>The bubbles on these plots now overlap completely; I’m confident I can re-create the CAALs using a much tighter pipeline than before.</strong></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">Comparison of CAALs, early years</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">Comparison of CAALs, later years</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="2024_survey_comp_deepdive_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="2024_survey_comp_deepdive_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>